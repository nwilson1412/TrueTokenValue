<template>
  <!-- ToDo: figure out webpack module loading so don't need to use boostrap CDN import in index.ejs -->
  <!-- <require from="bootstrap/css/bootstrap.scss"></require> -->

  <nav class="navbar navbar-dark fixed-top navbar-expand-lg bg-dark">
    <a class="navbar-brand" href="/">True Token Value</a>
    <div class="dropdown">
        <select value.bind="currencyType">
            <option value="usd">USD</option>
            <option value="eur">EUR</option>
            <option value="aud">AUD</option>
            <option value="eth">ETH</option>
            <option value="btc">BTC</option>
        </select>        
    </div>  
  </nav>

  <div id="content-body" style="padding-top: 56px; overflow: auto;">
    <!-- ToDo: implement routing and <router-content> goes here -->

    <table class="table table-striped">
    
      <thead>
        <tr>
            <!-- TODO: Add tooltip for "Adjusted price" and "True Token Price" -->
            <th class="w-15">Symbol</th>
            <th class="w-15">Rank</th>
            <th class="w-15">Price</th>
            <th class="w-15">Marketcap</th>
            <th class="w-20">Adjusted Price (Token Marketcap/BTC Circulating Supply)</th>
            <th class="w-20">Token price if it had Bitcoin's marketcap</th>
        </tr>
      </thead>
      <tbody>
        <tr if.bind="loadingCoinData">
          <td colspan="6" class="alert alert-warning">Loading...</td>
        </tr>
        <tr repeat.for="coin of coindata">
            <td>${(coin.symbol).toUpperCase()}</td>
            <td>${(coin.market_data.market_cap_rank)}</td>
            <td>${"$"+(coin.market_data.current_price[currencyType]).toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 4})}</td>
            <td>${"$"+(coin.market_data.market_cap[currencyType]).toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: 0})}</td>
            <td>${"$"+((coin.market_data.market_cap[currencyType] / coindata[0].market_data.circulating_supply).toLocaleString(undefined, {minimumFractionDigits: 2,maximumFractionDigits: 2,}))}</td>
            <td>${"$"+((coindata[0].market_data.current_price[currencyType] / (coin.market_data.market_cap[currencyType] / coindata[0].market_data.circulating_supply))*coin.market_data.current_price[currencyType]).toLocaleString(undefined, {minimumFractionDigits: 2,maximumFractionDigits: 3})}</td>
        </tr>

      </tbody>
    </table>
  </div>

</template>

